<html xmlns="http://www.w3.org/1999/xhtml" >
<head>
    <title>智慧茶园</title>
    <script type="text/javascript" src="https://libs.baidu.com/jquery/2.1.2/jquery.min.js"></script>
    <script type="text/javascript" src="https://echarts.baidu.com/gallery/vendors/echarts/echarts.min.js"></script>
    <script type="text/javascript" src="js/select2/js/select2.min.js"></script>
    <link href="js/select2/css/select2.css" rel="stylesheet" type="text/css" />
    <script type="text/javascript" src="js/bootstrap-datepicker/bootstrap-datepicker.js"></script>
    <link href="js/bootstrap-datepicker/bootstrap-datepicker.css" rel="stylesheet" type="text/css" />
    <script type="text/javascript" src="js/layer/layer.js"></script>
    <link href="css/base.css" rel="stylesheet" type="text/css" />
    <link href="css/style.css" rel="stylesheet" type="text/css" />
    <link href="css/dialog.css" rel="stylesheet" type="text/css" />
    <link href="ui.css" rel="stylesheet" type="text/css" />
</head>
<body>
    <div class="page">
            <div class="header">
                    <div class="dayinfo">
                            <a  class="weatherpic" target="_blank" href="http://php.weather.sina.com.cn/search.php?city=南京">
                                <div class="icon qing">
                                <div class="cloud"></div>
                                <div class="cloud"></div>
                                <div class="sun">
                                    <div class="rays"></div>
                                </div>
                                <div class="rain"></div>
                                <div class="lightning">
                                    <div class="bolt"></div>
                                    <div class="bolt"></div>
                                </div>
                                <div class="snow">
                                    <div class="flake"></div>
                                    <div class="flake"></div>
                                </div>
                                </div>
                                </a>
                                <div class="weathertext">
                                        <p class="city">句容</p>
                                        <p><i>24℃～31℃</i> &nbsp;<i>晴</i></p>
                                    </div>
                        </div>
                <div class="menu"><a href="home.html">主画面<span></span></a></div>
                <div class="menu"><a href="chart.html">实时曲线<span></span></a></div>
                <div class="title shadow">天王戴庄智慧茶园控制系统</div>
                <div class="menu"><a href="history.html">历史曲线<span></span></a></div>
                <div class="menu active"><a href="warn.html">报警记录<span></span></a></div>
                <div class="userinfo">
                    <a class="user fr" href="javascript:;"></a>
                    <a class="list fr" href="javascript:;"></a>
                </div>
            </div>
            <div class="main chart-page warn-page">
                    <div class="right">
                            <div class="top">
                                    <div class="cell total">
                                        <div class="panel">
                                          <p>今日报警总数</p>
                                          <div class="text">19</div>
                                            <ul class="detail">
                                                <li><span>0</span><span>温度</span></li>
                                                <li><span class="normal">2</span><span>湿度</span></li>
                                                <li><span>0</span><span>EC值</span></li>
                                                <li><span class="warning">19</span><span>降雨量</span></li>
                                                <li><span>0</span><span>CO2浓度</span></li>
                                                <li><span>0</span><span>光照强度</span></li>
                                                <li><span>0</span><span>土壤湿度</span></li>
                                                <li><span>0</span><span>土壤氮含量</span></li>
                                                <li><span>0</span><span>土壤磷含量</span></li>
                                                <li><span>0</span><span>土壤钾含量</span></li>
                                                <li><span>0</span><span>天窗</span></li>
                                                <li><span>0</span><span>湿帘</span></li>
                                                <li><span>0</span><span>风机</span></li>
                                                <li><span>0</span><span>LED灯</span></li>
                                                <li><span>0</span><span>遮阳网(内)</span></li>
                                                <li><span>0</span><span>遮阳网(外)</span></li>
                                                <li><span>0</span><span>滴灌</span></li>
                                            </ul>
                                       </div>
                                    </div>
                                    <div class="cell sehzhi">
                                         <div class="panel">
                                           <p>报警设置</p>
                                           <ul class="detail">
                                             <li><span>温度：</span><span>温度>30</span><i id="btn-setting"></i></li>
                                             <li><span>湿度：</span><span>湿度>10</span><i></i></li>
                                             <li><span>降雨量：</span><span>降雨量>20</span><i></i></li>
                                           </ul>
                                         </div>
                                    </div>
                            </div>
                            <div class="bottom">
                                    <div class="cell">
                                     <div class="panel">
                                            <p>报警记录</p>
                                            <div class="warn-area">
                                              <div class="warn-canshu">
                                                <span class="name">参数：</span>
                                                <select style="width:80%;display: none;" id="demo-select2-multiple-selects" multiple="multiple">   
                                                    <option value="WD">温度</option>
                                                    <option value="SD">湿度</option>
                                                    <option value="EC">EC值</option>
                                                    <option value="JY:">降雨量</option>
                                                    <option value="CO2">CO2浓度</option>
                                                    <option value="GZ">光照强度</option>
                                                    <option value="TRSZ">土壤湿度</option>
                                                    <option value="TRN">土壤氮含量</option>
                                                    <option value="TRP">土壤磷含量</option>
                                                    <option value="TRK">土壤钾含量</option>
                                                 </select>
                                                </div>
                                                <div class="date-type">
                                                    <span>时间类型：</span>
                                                    <select id="demo-select2-selects" style="display: none;">
                                                        <option value="year">年</option>
                                                        <option value="month">月</option>
                                                        <option value="day">日</option>
                                                        <option value="hour">小时</option>
                                                    </select>
                                                    <span>时间段：</span>
                                                    <div class="input-daterange input-group" id="datepicker">
                                                        <input type="text" class="form-control" autocomplete="off" name="start" />
                                                        <span style="margin: 0 10px;">至 </span>
                                                        <input type="text" class="form-control" autocomplete="off" name="end" />
                                                    </div>
                                                    <input type="button" class="btn btn-search"/>
                                                </div>
                                            </div>
                                            <div class="chart-body">
                                                <div id="chart8" style="width:100%;height:100%"></div>
                                            </div>
                                      </div>
                                    </div>
                            </div>
                        </div>
            </div>
    </div>

    <div id="showsetting">
        <ul> 
            <li class="detail warn">
                <p class="name"></p>
                <p class="cstext"><span>参数</span><span>></span><span>数值</span></p>
                <p class="csdown"><input type="text" placeholder="请输入参数" /></p>
                <p class="csif"><span class="active">&gt;</span><span>&ge;</span><span>&lt;</span><span>&le;</span><span>=</span><span>&ne;</span></p>
                <p class="csvalue"><input type="text" placeholder="请输入数值" /></p>
            </li>
        </ul>
  </div>
</body>
<script>
  $("#btn-setting").click(function(){
  layer.open({
    type:1,
    title:"报警设置",
    area : "330px",
    skin: 'farm-dialog',
    btn: ['取消', '确定'],
    content: $('#showsetting')
  });
  });
  $("#demo-select2-multiple-selects").select2();
   $("#demo-select2-selects").select2({minimumResultsForSearch: -1});
   $('.input-daterange').datepicker({
        format: "yyyy-mm-dd",
        todayBtn: "linked",
        autoclose: true,
        todayHighlight: true
    });
    function getChartOption(options){
    var defaults={
        tooltipbg:'rgba(77,189,186,0.85)',
        xdata:['周一','周二','周三','周四','周五','周六','周日'],
        legend:[],
        axiscolor:'#357398',
        labelcolor:'#357398',
        series:[{
        name:"温度",
        linecolor:"#4DBDBA",
        areabg:'rgba(0,0,0,0)',
        smooth:true,
        seriesdata:[0, 6,12, 6,12, 6,12]
        }]
    }
    options = $.extend({},defaults, options);
    var settings = {
        tooltip : {
            trigger: 'axis',
            backgroundColor: options.tooltipbg,
            padding:10,
            axisPointer: {
                type: 'cross',
                label: {
                    backgroundColor: options.tooltipbg
                }
            }
        },
        legend: {
           data: options.legend,
           textStyle:{
              color: options.axiscolor
           },

        },
        animation:true,
        grid: {
            left: '30px',
            right: '20px',
            top: '10px',
            bottom: '30px'
        },
        xAxis : [
            {
                type : 'category',
                boundaryGap : false,
                data : options.xdata,
                axisLine:{
                    lineStyle:{
                        color:options.axiscolor //更改坐标轴颜色
                    }
                },
                axisLabel: {
                show: true,
                    textStyle: {
                        color: options.labelcolor  //更改坐标轴文字颜色
                    }
                }
            }
        ],
        yAxis : [
            {
                type : 'value',
                splitLine:{
                    show:false
                },
                axisLine:{
                    lineStyle:{
                        color:options.axiscolor //更改坐标轴颜色
                    }
                },
                axisLabel: {
                show: true,
                    textStyle: {
                    color: options.lablecolor  //更改坐标轴文字颜色
                    }
                }
            }
        ],
        series : []
    };
  $.each(options.series,function(){
    var seriesObj= {
                name:this.name,
                type:'line',
                smooth:this.smooth,
                symbol:"none",
                itemStyle : { 
                normal : { 
                color:this.linecolor,//改变折线点的颜色
                lineStyle:{ color:this.linecolor,width:1} }
                },
                areaStyle: {normal: {
                color: new echarts.graphic.LinearGradient(0, 0, 0, 1, [{
                        offset: 0,
                        color: this.areabg
                    },{
                        offset: 0.3,
                        color: this.areabg
                    }, {
                        offset: 1,
                        color: 'rgba(0,0,0,0)'
                    }]),
                }},
                data:this.seriesdata
           }
           settings.series.push(seriesObj);
  })
  
  return settings;
}

var myChart8= echarts.init(document.getElementById('chart8'),'light');
var option8=getChartOption({
        tooltipbg:'rgba(0,145,189,0.85)',
        legend:["氮含量","磷含量","钾含量"],
        series:[{
            name:"氮含量",
            linecolor:"#4098FF",
            areabg:'rgba(0,0,0,0)',
            smooth:true,
            seriesdata:[1, 11,12, 1,1, 8,0]
        },
        {
            name:"磷含量",
            linecolor:"#9C5AFF",
            areabg:'rgba(0,0,0,0)',
            smooth:true,
            seriesdata:[1, 5,7, 1,4, 8,12]
        },
        {
            name:"钾含量",
            linecolor:"#FF4848",
            areabg:'rgba(0,0,0,0)',
            smooth:true,
            seriesdata:[12, 5,7, 1,4, 8,12]
        }
        ]
});
myChart8.setOption(option8);
window.addEventListener("resize",function(){
     myChart8.resize();
 });
</script>
</html>



